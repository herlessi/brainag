openapi: 3.0.1
info:
  title: API FIAP LOJA
  description: API do tech challenger da FASE 1 - Arquitetura de Softwares - FIAP.
  version: 0.0.1
  # termsOfService: https://mockapi.io
  contact:
    name: Herlessi Nogueira Bezerra
    email: herlessi@gmail.com
    url: https://mockapi.io
  license:
    name: "Lincença: GPLv3"
    url: https://www.gnu.org/licenses/gpl-3.0.html
externalDocs:
  description: Documentação burocrática
  url: https://mockapi.io

servers:
- url: http://localhost:8080/
  description: API de Teste

paths:
  /auth/login:
    post:
      summary: Login por CPF
      tags:
        - Auth
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                cpf:
                  type: string
                  example: "12345678909"
                name:
                  type: string
                  example: "nome da silva"
                email:
                  type: string
                  example: "nome@email.com"
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object
  /auth/anonymouslogin:
    post:
      summary: Login Anonimo
      tags:
        - Auth
      description: Login sem autenticação
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object
  /customer:
    get:
      summary: Recupera todos os clientes
      tags:
        - Customer
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
    post:
      summary: Cria um novo cliente
      tags:
        - Customer
      security:
        - auth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                cpf:
                  type: string
                  example: "12345678909"
                name:
                  type: string
                  example: "nome da silva"
                email:
                  type: string
                  example: "email@email.com"
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
  /order:
    get:
      summary: Recupera todos os pedidos
      tags:
        - Order
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
    post:
      summary: Cria um novo pedido
      tags:
        - Order
      security:
        - auth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                customerId:
                  type: string
                  example: "12345678909"
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      productId:
                        type: string
                        example: "prod123"
                      quantity:
                        type: integer
                        example: 2
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
  /order/categories:
    get:
      summary: Recupera todas as categorias de pedidos
      tags:
        - Order
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
  /order/categories/{id}/products:
    get:
      summary: Recupera todas os produtos da categoria
      tags:
        - Order
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: number
          description: ID da categoria
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
  /order/categories/products/{id}:
    get:
      summary: Lista um produto especifico
      tags:
        - Order
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: number
          description: ID da categoria
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
  /order/cart/addproduct:
    post:
        summary: Adiciona um produto no carrinho
        tags:
          - Order
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  product_id:
                    type: number
                    example: "1"
                  quantity:
                    type: number
                    example: "1"
        security:
          - auth: []
        responses:
          200:
            description: Sucesso
            content:
              application/json:
                schema:
                  type: object
  /order/cart/removeproduct:
    delete:
        summary: Remove um produto no carrinho
        tags:
          - Order
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  product_id:
                    type: number
                    example: "1"
                  order_id:
                    type: number
                    example: "1"
        security:
          - auth: []
        responses:
          200:
            description: Sucesso
            content:
              application/json:
                schema:
                  type: object
  /order/cart/{order_id}/products:
    get:
        summary: Lista produtos do carrinho
        tags:
          - Order
        parameters:
        - name: order_id
          in: path
          required: true
          schema:
            type: number
          description: ID da ordem
        security:
          - auth: []
        responses:
          200:
            description: Sucesso
            content:
              application/json:
                schema:
                  type: object
  /payment/checkout:
    post:
        summary: Simula pagamento Aprovado
        tags:
          - Payment
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  order_id:
                    type: number
                    example: 1
                  # customer_id:
                  #   type: number
                  #   example: 1
                  card_number:
                    type: string
                    example: "1111111111111111"
                  month_expires:
                    type: string
                    example: "10"
                  year_expires:
                    type: string
                    example: "25"
                  cvv_expires:
                    type: string
                    example: "123"
        security:
          - auth: []
        responses:
          200:
            description: Sucesso
            content:
              application/json:
                schema:
                  type: object
  /payment/checkout/negado:
    post:
        summary: Simula pagamento Negado
        tags:
          - Payment
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  order_id:
                    type: number
                    example: 1
                  customer_id:
                    type: number
                    example: 1
                  card_number:
                    type: string
                    example: "0000000000000000"
                  month_expires:
                    type: string
                    example: "10"
                  year_expires:
                    type: string
                    example: "25"
                  cvv_expires:
                    type: string
                    example: "123"
        security:
          - auth: []
        responses:
          200:
            description: Sucesso
            content:
              application/json:
                schema:
                  type: object 
          400:
            description: Erro
            content:
              application/json:
                schema:
                  type: object                  
  /auth/admin/login:
    post:
      summary: Login Administrativo
      tags:
        - Admin Manager - Auth
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: "admin@email.com"
                password:
                  type: string
                  example: "123456"                  
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object
  /production/orders:
    get:
      summary: Listar Pedidos 
      tags:
        - Production
      parameters:
        - name: fl_status
          in: query
          required: true
          schema:
            type: number
          description: ID da Ordem de Pedido
          summary: 1	Registrado, 2	Pago, 3	Recebido, 4	Em Preparação, 5 Pronto, 6 Finalizado, 7 Cancelado
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
  /production/cancel/{order_id}:
    put:
      summary: Cancela um pedido
      tags:
        - Production
      parameters:
        - name: order_id
          in: path
          required: true
          schema:
            type: number
          description: ID da Ordem de Pedido
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
  /production/accept/{order_id}:
    put:
      summary: Aceita um pedido
      tags:
        - Production
      parameters:
        - name: order_id
          in: path
          required: true
          schema:
            type: number
          description: ID da Ordem de Pedido
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
  /production/preparation/{order_id}:
    put:
      summary: Pedido em preparação
      tags:
        - Production
      parameters:
        - name: order_id
          in: path
          required: true
          schema:
            type: number
          description: ID da Ordem de Pedido
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
  /production/ready/{order_id}:
    put:
      summary: Marcar um pedido como pronto
      tags:
        - Production
      parameters:
        - name: order_id
          in: path
          required: true
          schema:
            type: number
          description: ID da Ordem de Pedido
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
  /production/finish/{order_id}:
    put:
      summary: Finalizar um pedido
      tags:
        - Production
      parameters:
        - name: order_id
          in: path
          required: true
          schema:
            type: number
          description: ID da Ordem de Pedido
      security:
        - auth: []
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object

  /admin/customer:
    get:
      summary: Listar Clientes
      tags:
        - Admin Manager - Customer
      security:
        - auth: []
      parameters:
        - name: id
          in: query
          schema:
            type: string 
          description: id do cliente
        - name: name
          in: query
          schema:
            type: string 
          description: nome do cliente
        - name: email
          in: query
          schema:
            type: string 
          description: email do cliente
        - name: cpf
          in: query
          schema:
            type: string 
          description: cpf do cliente                                    
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object
    post:
      summary: Criar Novo Cliente
      tags:
        - Admin Manager - Customer
      security:
        - auth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "name"
                email:
                  type: string
                  example: "email@email.com"                  
                cpf:
                  type: string
                  example: "00000000000"                  
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object                
    put:
      summary: Atualizar Cliente
      tags:
        - Admin Manager - Customer
      security:
        - auth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: number
                  example: "1"
                name:
                  type: string
                  example: "name"
                email:
                  type: string
                  example: "email@email.com"                  
                cpf:
                  type: string
                  example: "00000000000"                  
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object 
    delete:
      summary: Desativar Cliente
      tags:
        - Admin Manager - Customer
      security:
        - auth: []
      parameters:
        - name: id
          in: query
          schema:
            type: number
          required: true
          description: id do cliente       
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object                                
  /admin/users:
    get:
      summary: Listar Usuario Admin
      tags:
        - Admin Manager - Users
      security:
        - auth: []
      parameters:
        - name: id
          in: query
          schema:
            type: string 
          description: id do usuario
        - name: name
          in: query
          schema:
            type: string 
          description: nome do usuario
        - name: email
          in: query
          schema:
            type: string 
          description: email do usuario                                    
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object
    post:
      summary: Criar Novo Usuario Admin
      tags:
        - Admin Manager - Users
      security:
        - auth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "name"
                email:
                  type: string
                  example: "email@email.com"                  
                password:
                  type: string
                  example: "******"                  
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object                
    put:
      summary: Atualizar Usuario Admin
      tags:
        - Admin Manager - Users
      security:
        - auth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: number
                  example: "1"
                name:
                  type: string
                  example: "name"
                email:
                  type: string
                  example: "email@email.com"                  
                password:
                  type: string
                  example: "******"              
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object 
    delete:
      summary: Desativar Usuario Admin
      tags:
        - Admin Manager - Users
      security:
        - auth: []
      parameters:
        - name: id
          in: query
          schema:
            type: number
          required: true
          description: id do usuario       
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object     
  /admin/products:
    get:
      summary: Listar Produtos
      tags:
        - Admin Manager - Products
      security:
        - auth: []
      parameters:
        - name: id
          in: query
          schema:
            type: number 
          description: id do produto
        - name: category_id
          in: query
          schema:
            type: number 
          description: id da categoria
        - name: name
          in: query
          schema:
            type: string 
          description: nome do produto
        - name: price
          in: query
          schema:
            type: number 
          description: preço do usuario                                    
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object
    post:
      summary: Criar Novo Produtos
      tags:
        - Admin Manager - Products
      security:
        - auth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                category_id:
                  type: number
                  example: "1"
                name:
                  type: string
                  example: "produto"                  
                price:
                  type: string
                  example: "1.20"                  
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object                
    put:
      summary: Atualizar Produtos
      tags:
        - Admin Manager - Products
      security:
        - auth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: number
                  example: "1"
                category_id:
                  type: number
                  example: "1"
                name:
                  type: string
                  example: "produto"                  
                price:
                  type: string
                  example: "1.20"                
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object 
    delete:
      summary: Desativar Produtos
      tags:
        - Admin Manager - Products
      security:
        - auth: []
      parameters:
        - name: id
          in: query
          schema:
            type: number
          description: id do produto       
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
        400:
          description: Erro
          content:
            application/json:
              schema:
                type: object     

components:
  schemas:
    responses:
      200:
        description: Sucesso
        content:
          application/json:
            schema:
              type: object
      400:
        description: Erro
        content:
          application/json:
            schema:
              type: object
  securitySchemes:
    auth:
      type: http
      scheme: bearer
      bearerFormat: JWT
